# ü§ñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è.

## üìÅ –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

- `parser_job.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `manage_parser.sh` - –°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `bakery-parser.service` - Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è Linux
- `data/parser_job_control.json` - –§–∞–π–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Å–µ—Ä–≤–∏—Å–∞)

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
python3 parser_job.py status

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
python3 parser_job.py enable

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —Ä–∞–∑
python3 parser_job.py run-once

# –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
python3 parser_job.py disable
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –æ–±—ã—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å
./manage_parser.sh install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
./manage_parser.sh start

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
./manage_parser.sh enable

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
./manage_parser.sh parsing-on
```

## üìä –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `python3 parser_job.py start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ |
| `python3 parser_job.py enable` | –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ |
| `python3 parser_job.py disable` | –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ |
| `python3 parser_job.py status` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã |
| `python3 parser_job.py run-once` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –æ–¥–∏–Ω —Ä–∞–∑ |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º (Linux)

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `./manage_parser.sh install` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å |
| `./manage_parser.sh start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `./manage_parser.sh stop` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `./manage_parser.sh restart` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `./manage_parser.sh enable` | –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ |
| `./manage_parser.sh disable` | –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ |
| `./manage_parser.sh parsing-on` | –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ |
| `./manage_parser.sh parsing-off` | –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ |
| `./manage_parser.sh status` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å |
| `./manage_parser.sh logs` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã. –ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PARSER_INTERVAL` –≤ —Ñ–∞–π–ª–µ `parser_job.py`:

```python
# –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) - 3 –º–∏–Ω—É—Ç—ã
PARSER_INTERVAL = 3 * 60  # 180 —Å–µ–∫—É–Ω–¥
```

### –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

–í —Ñ–∞–π–ª–µ `bakery-parser.service` –æ–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç–∏:

```ini
WorkingDirectory=/path/to/BakeryMiniAppServer
ExecStart=/usr/bin/python3 /path/to/BakeryMiniAppServer/parser_job.py start
Environment=PYTHONPATH=/path/to/BakeryMiniAppServer
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

```bash
python3 parser_job.py status
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í–∫–ª—é—á–µ–Ω –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ü–æ—Å–ª–µ–¥–Ω–∏–π —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
- –ü–æ—Å–ª–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞

### –õ–æ–≥–∏

```bash
# –õ–æ–≥–∏ systemd —Å–µ—Ä–≤–∏—Å–∞
./manage_parser.sh logs

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
sudo journalctl -u bakery-parser -f
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status bakery-parser

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
journalctl -u bakery-parser -n 50

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./manage_parser.sh restart
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
python3 parser_job.py status

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
python3 parser_job.py run-once

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
python3 parser_job.py enable
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

```bash
# –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∑–∞–Ω–æ–≤–æ)
rm data/parser_job_control.json

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
./manage_parser.sh restart
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–°–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏:
- –ü–∞–º—è—Ç—å: 512MB
- CPU: 50%

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–°–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `www-data` —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

## üìã –ú–∏–≥—Ä–∞—Ü–∏—è —Å Heroku

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
scp parser_job.py user@server:/path/to/BakeryMiniAppServer/
scp manage_parser.sh user@server:/path/to/BakeryMiniAppServer/
scp bakery-parser.service user@server:/path/to/BakeryMiniAppServer/
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ù–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/BakeryMiniAppServer
chmod +x manage_parser.sh
./manage_parser.sh install
```

### 3. –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
./manage_parser.sh start

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
./manage_parser.sh enable

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
./manage_parser.sh parsing-on
```

### 4. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Heroku Scheduler

–í Heroku –æ—Ç–∫–ª—é—á–∏—Ç–µ —Å—Ç–∞—Ä—ã–π scheduler, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –ø–∞—Ä—Å–∏–Ω–≥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç –∫–∞–∫ Heroku
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –∏ —Å—Ç–∞—Ç—É—Å
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±—ã—á–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–∞–π–ª `data/products_scraped.json`
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

